import{p as $,a as E,r as f,q,s as _,e as g,k as A,w as i,v as B,h as z,x as F,f as n,o as M,b as y,d as o,n as w,u as t,y as N,z as O,A as R,B as P,C as j}from"./index-Bv3EjZRS.js";const D={class:"my-auto"},I={class:"text-center"},H={__name:"LoginView",setup(T){const x=$(),b=E(),h=z(),k=F(),r=f(!1),d=f(!1),{handleSubmit:V}=q({validationSchema:{email:"required|email",password:"required"}}),m=_("email"),v=_("password"),S=V(async l=>{d.value=!0;try{var e=new FormData;e.append("email",l.email),e.append("password",l.password);var a=await fetch(g.login.url,{method:g.login.method,body:e});a=await a.json();const s=`${a==null?void 0:a.token_type} ${a==null?void 0:a.access_token}`;b.login(s,a==null?void 0:a.user),x.notify("Successfully logged in!","success");const u=h.query.redirect||{name:"dashboard"};k.push(u)}catch(s){console.log(s)}finally{d.value=!1}});return(l,e)=>{const a=n("v-card-title"),s=n("v-card-text"),u=n("v-text-field"),p=n("v-btn"),C=n("v-card-actions"),L=n("v-form"),U=n("v-card");return M(),A(U,{loading:d.value,class:B(["w-100 px-sm-7 py-sm-8 pa-2",l.$vuetify.display.smAndUp?"":"d-flex flex-column h-100"]),elevation:"0",rounded:l.$vuetify.display.smAndUp?"xl":"0","max-width":l.$vuetify.display.smAndUp?"380":""},{default:i(()=>[y("div",D,[y("div",I,[o(a,{class:"text-h4 font-weight-black text-teal"},{default:i(()=>e[3]||(e[3]=[w("Login")])),_:1}),o(s,{class:"text-grey"},{default:i(()=>e[4]||(e[4]=[w("Enter your credentials to continue")])),_:1})]),o(L,{onSubmit:j(t(S),["prevent"])},{default:i(()=>[o(s,{class:"pb-0"},{default:i(()=>[o(u,{"prepend-inner-icon":t(N),modelValue:t(m).value.value,"onUpdate:modelValue":e[0]||(e[0]=c=>t(m).value.value=c),"error-messages":t(m).errorMessage.value,type:"email",name:"email",label:"Email",class:"mb-3",variant:"outlined"},null,8,["prepend-inner-icon","modelValue","error-messages"]),o(u,{"prepend-inner-icon":t(O),modelValue:t(v).value.value,"onUpdate:modelValue":e[1]||(e[1]=c=>t(v).value.value=c),"error-messages":t(v).errorMessage.value,variant:"outlined","append-inner-icon":r.value?t(R):t(P),type:r.value?"text":"password",label:"Password",name:"password",class:"mb-3","onClick:appendInner":e[2]||(e[2]=c=>r.value=!r.value)},null,8,["prepend-inner-icon","modelValue","error-messages","append-inner-icon","type"])]),_:1}),o(C,{class:"d-flex flex-column ga-2"},{default:i(()=>[o(p,{type:"submit",color:"teal",block:"",size:"large",variant:"flat",loading:d.value,text:"Login",rounded:"pill"},null,8,["loading"]),o(p,{to:{name:"register"},block:"",variant:"text",color:"medium-emphasis",text:"Create a new account",rounded:"pill"})]),_:1})]),_:1},8,["onSubmit"])])]),_:1},8,["loading","class","rounded","max-width"])}}};export{H as default};
